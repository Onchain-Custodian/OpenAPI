# ONCHAIN CUSTODIAN API DOCS

## 1. Introduction

This API document is designed to help developers integrate Onchain Custodian's warm wallet solution with their systems. There are two types of open APIs offered: Query and Withdraw. Developers can create APIs with different permissions according to their own needs, and use these APIs to query information or to perform withdrawal transactions.

## 2. API KEY

In order for developers to deploy any APIs in their system, they must first apply for the API key and other relevant information via the Onchain Custodian platform. The development of APIs shall be carried out according to the details in this document. In case of any questions or suggestions, please reach out to your Onchain Custodian Relationship Manager or our support team at support@oncustodian.com.

> **Note:** API keys do not expire. You need to manually expire unused API keys by deleting them.

## 3. REST API

REST, short for Representational State Transfer, is currently the most commonly used software architecture. It has a clear structure, is easy to expand, and is being adopted by more and more developers.

## 4. Standards

### Time Stamp

Unless otherwise specified, all timestamps returned via API will be in milliseconds, UTC time. For example, **1573574713991**.

### Number

In order to maintain cross-platform accuracy and data integrity, numbers are returned as strings. It is recommended that developers convert numbers to strings when making API requests, to avoid truncation and precision errors. Integers such as transaction number or ordinal number are returned without any quotation marks.

## 5. Types of API

There are two types of API.

### Public Open API

Public Open API can be used to get the API server system time.

Requests can be sent without authentication.

### Private API

Private API is used for Onchain Custodian's warm wallet.

The requests sent must be signed using a standard form of verification.

Private API requires verification using the assigned API key.

## 6.Verification

There are 4 verification factors in total:

- Generate API Key
- Initiate API request
- IP Whitelist
- Server time

### 6.1. Generation of an API Key and Signature

Before initiating any request, you need to create an API Key in the platform. After generating an API Key, you will have two essential pieces of information:

#### API Key

The **API key** string is generated by the Custodian account admin.

#### Signature

The **signature** string is generated by applying HMAC SHA256 encryption to the combination of multiple fields-

`sign=CryptoJS.enc.Base64.Stringify(CryptoJS.HmacSHA256(timestamp + 'GET' +'14db63d7f3614664ad1c71dd134a21dc'+ '/v1/api/account'+"?"+"coinType=ETH", secret))`

Here, the timestamp, method type, API Key, request path, query string, body string (after being converted to a map, the keys are sorted by ASCII code and spliced), and secret are passed to a Base64 encoding method. The stated fields are:

- **Timestamp:** The in Unix timestamp of the current UTC time (in milliseconds).

> Please note that for timestamps that are **off by more than 30 seconds** (before or after), the request will be considered expired by the system and will be rejected. If there is a large deviation between your server and the API server, we recommend that you to get the server time using the server time API.

- **Method type:** "GET"/"POST" (All caps)

- **Request path:** For example, "/v1/api/account"

- **Query string:** The URL parameters. For example, `page_num=1&page_size=10&coin_type=BTC`

- **Body string:** The body parameters (for POST requests). Parameter names are sorted in ASCII code order, the key-value pairs are concatenated using **"="** and the different separated using **"&"**. For example, consider the request body:

```json
{
  "mnt_nd": "ZPG",
  "amount": 190,
  "to_address": "AUol16ghiT9AtxRDtNeq3ovhWJ5iaY6iyd"
}
```

The string generated for the above request body is `amount=190&mnt_nd=ZPG&to_address=AUol16ghiT9AtxRDtNeq3ovhWJ5iaY6iyd`

- **Secret:** Generated by the platform along with the API key. Custodian stores the hash value of the secret, which is encrypted using a passphrase. For example, `22582BD0CFF14C41EDBF1AB98506286D`

> The client chooses a passphrase and shares it with the Custodian platform as a means of secret verification and ensure API access security. In case the client loses this passphrase, the platform cannot recover it, which would then require the client to generate new API keys.

### 6.2. Initiating API Requests

All requests must include the following fields in the **request header**:

| Key                         | Value                               | Description                                                                                                              |
| --------------------------- | ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| Authorization               | ApiKey:Request time stamp:Signature | The API key, UNIX timestamp for the time of request (in milliseconds), and the signature separated using a colon (**:**) |
| Custodian-access-passphrase | Random string                       | Password to encrypt the secret                                                                                           |

> **Note:** All requests should contain application/json type content and be valid JSON.

### 6.3. IP Whitelist

The API must be white listed when it is created. In subsequent API calls, the source IP must also be white listed.

### 6.4. Obtaining Server Time

This public open API can be used to fetch the server time. It does not require authentication.

**Method:** GET

**Request URL:** /v1/api/general/time

> There is a request upper limit set at 20 times per 2 seconds.

**Sample Response:**

```json
{
  "timestamp": 1573574713991
}
```

### 6.5. Examples of How to make API calls

Refer to github link: https://github.com/aixingjuele/custodian-sdk-java

## 7. API List

| Method | URL                                                                                                 | Description                                                                  |
| :----: | --------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |
|  GET   | [/v1/api/account](#711-fetch-details-for-the-assets-in-the-wallet)                                  | Fetch details for all the different assets in the wallet                     |
|  GET   | [/v1/api/account/{coinType}](#712-fetch-wallet-details-by-coin-type)                                | Fetch details for a particular asset in the wallet                           |
|  GET   | [/v1/api/account/deposit-address/{coinType}](#713-fetch-wallet-address-by-coin-type)                | Fetch the deposit address for an asset in the wallet                         |
|  GET   | [/v1/api/account/verify-deposit-address/{coinType}/{address}](#714-verify-a-master-deposit-address) | Verify if the address is the correct deposit address for an asset            |
|  GET   | [/v1/api/account/list-hdaddress](#715-fetch-wallet-details-for-master-and-child-addresses)          | Fetch the child addresses using the master key                               |
|  POST  | [/v1/api/account/balance](#716-fetch-address-wise-balance-details-by-coin-type)                     | Fetch address-wise balance details by coin type                              |
|  PUT   | [v1/api/account/collect](#717-collect-funds-from-child-addresses-and-transfer-to-master-address)    | Collect funds from child addresses and transfer to master address            |
|  PUT   | [v1/api/account/collect/auto](#718-update-auto-collect-configuration)                               | Update auto-collect configuration                                            |
|  GET   | [v1/api/account/txfee](#719-fetch-current-transaction-fee-by-coin-type)                             | Fetch the current transaction fee for a particular coin type                 |
|  POST  | [/v1/api/list-trans](#721-fetch-list-of-transactions)                                               | Fetch the transaction history for a wallet, can be filtered using parameters |
|  GET   | [/v1/api/trans/{tx_id}](#722-fetch-transaction-details-by-transaction-id)                           | Fetch details for a transaction using the transaction ID                     |
|  POST  | [/v1/api/trans/withdrawal](#731-send-a-withdrawal-request)                                          | Send a withdrawal request                                                    |
|  POST  | [/v1/api/hd-address](#741-generate-child-addresses-for-a-master-address)                            | Create child addresses for a master key                                      |
|  PUT   | [/v1/api/hd-address](#742-modify-the-name-of-a-child-wallet-address)                                | Assign a new name to a child address                                         |
|  POST  | [host:port/{notice-type}](#751-transaction-notification-api-callback)                               | Configurable callback method                                                 |


### Reference Tables

#### Transaction Type

| Transaction Type | Description              |
| :--------------: | ------------------------ |
|        1         | Withdrawal               |
|        2         | Deposit (Master address) |
|        3         | Deposit (Child address)  |
|        4         | Collection               |

#### Coin Type

> All the "coin_type" names are the same as the "coin_unique_name" for every coin.

|   Coin Type    |              Coin Name              |      Protocol       |
| :------------: | :---------------------------------: | :-----------------: |
|     BCH     |            Bitcoin Cash             |   Bitcoin（分叉）    |
|     BTC     |               Bitcoin               |       Bitcoin       |
|     CGT     |       Curio Governance Token        |      Ethereum       |
|     DAI     |           Dai Stablecoin            |      Ethereum       |
|     ETH     |              Ethereum               |      Ethereum       |
|     FTM     |            Fantom Token             |      Ethereum       |
|     FXF     |               Finxflo               |      Ethereum       |
|     OOE     |               OpenOcean             |      Ethereum       |
|     REN     |              Republic               |      Ethereum       |
|     SATT    | Smart Advertising Transaction Token |      Ethereum       |
|     USDC    |              USD Coin               |      Ethereum       |
| USDT-ERC20  |             Tether USD              |      Ethereum       |
| XSGD-ERC20  |                XSGD                 |      Ethereum       |
| XSGD-ZRC2   |                XSGD                 |       Ziliqa        |
|     ZIL     |               Ziliqa                |       Ziliqa        |
|     SNX     |       Synthetix Network Token       |      Ethereum       |
|     MATIC   |             Matic Token             |      Ethereum       |
|     SHIB    |              Shiba Inu              |      Ethereum       |
|     1INCH   |             1Inch Token             |      Ethereum       |
|     SUSHI   |             Sushi Token             |      Ethereum       |
|     AVVE    |             Aave Token              |      Ethereum       |
|     LINK    |           ChainLink Token           |      Ethereum       |
|     CHZ     |               chiliZ                |      Ethereum       |
|     OKB     |                 OKB                 |      Ethereum       |
|     BUSD    |             Binance USD             |      Ethereum       |
|     YFI     |            yearn.finance            |      Ethereum       |
|     HT      |             Huobi Token             |      Ethereum       |
|     COMP    |              Compound               |      Ethereum       |
|     UNI     |               Uniswap               |      Ethereum       |
|     MKR     |                Maker                |      Ethereum       |
|     WAVES   |                Waves                |      Ethereum       |
|     WBTC    |             Wrapped BTC             |      Ethereum       |
|     HBTC    |              Huobi BTC              |      Ethereum       |
|     FTT     |              FTX Token              |      Ethereum       |
|     TUSD    |               TrueUSD               |      Ethereum       |
|     CRO     |           Crypto.com Coin           |      Ethereum       |
|     TEL     |               Telcoin               |      Ethereum       |
|     CEL     |               Celsius               |      Ethereum       |
|     LEO     |         Bitfinex Leo Token          |      Ethereum       |
| XIDR-ERC20  |           XIDR Token                |      Ethereum       |
| XIDR-ZRC2   |           XIDR Token                |      Ziliqa         |


> The request limits set for different API operations are:
>
> - **General queries:** 20 times every 2 seconds
> - **Withdrawal requests:** 10 times every 2 seconds

### 7.1. Account

#### 7.1.1. Fetch Details for the Assets in the Wallet

```json
{
  "URL": "/v1/api/account",

  "Method": "GET",

  "Params": {},

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": [
      {
        "address": "tb1q07r35czmvuhl28r93qgv02h6t030gcheqd34rs",
        "address_name": "Hot-Wallet-16-BTC",
        "coin_unique_name": "BTC",
        "coin_symbol": "BTC",
        "coin_full_name": "Bitcoin",
        "coin_decimal": 8,
        "deposit_allowed": 1,
        "withdrawal_allowed": 1,
        "current_balance": "0.084800000000000000",
        "fee_coin": "BTC",
        "estimated_fee": "0.0001",
        "upper_limit": "10.000000000000000000",
        "lower_limit": "0.010000000000000000",
        "alarm_frequency": 0
      }
    ]
  }
}
```

|     Parameter      |  Type  | Description                                                                       |
| :----------------: | :----: | :-------------------------------------------------------------------------------- |
|      address       | string | wallet address                                                                    |
|    address_name    | string | wallet address name                                                               |
|  coin_unique_name  | string | system alias                                                                      |
|    coin_symbol     | string | Coin symbol                                                                       |
|   coin_full_name   | string | coin full name                                                                    |
|    coin_decimal    |  int   | decimal precision of balance value                                                |
|  deposit_allowed   |  int   | whether deposit is enabled, 0=No,1=Yes                                            |
| withdrawal_allowed |  int   | whether withdrawal is enabled, 0=No, 1=Yes                                        |
|  current_balance   | string | current balance                                                                   |
|      fee_coin      | string | coin type of the transaction fee                                                  |
|   estimated_fee    | string | estimated transaction fee                                                         |
|    upper_limit     | string | email alert trigger upper limit                                                   |
|    lower_limit     | string | email alert trigger lower limit                                                   |
|  alarm_frequency   |  int   | notification frequency setting (0: each transaction, 1: every hour, 2: every day) |

#### 7.1.2. Fetch Wallet Details by Coin Type

> The string passed using coin_type parameter needs to be the unique name of the token you are performing the query operation for.

```json
{
  "URL": "/v1/api/account/{coinType}",

  "Method": "GET",

  "Params": {},

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
      "address": "tb1q07r35czmvuhl28r93qgv02h6t030gcheqd34rs",
      "address_name": "Hot-Wallet-16-BTC",
      "coin_unique_name": "BTC",
      "coin_symbol": "BTC",
      "coin_full_name": "Bitcoin",
      "coin_decimal": 8,
      "deposit_allowed": 1,
      "withdrawal_allowed": 1,
      "current_balance": "0.084800000000000000",
      "fee_coin": "BTC",
      "estimated_fee": "0.0001",
      "upper_limit": "10.000000000000000000",
      "lower_limit": "0.010000000000000000",
      "limit_per_deal": "1.000000000000000000",
      "day_limit_amount": "1.000000000000000000",
      "hour_limit_amount": "1.000000000000000000",
      "alarm_frequency": 0
    }
  }
}
```

##### Request Parameters

| Parameter |  Type  | Description                               | Required |
| :-------: | :----: | :---------------------------------------- | :------- |
| coin_type | string | coin type ([Reference table](#coin-type)) | yes      |

##### Response Parameters

|     Parameter      |  Type  | Description                                                                       |
| :----------------: | :----: | :-------------------------------------------------------------------------------- |
|      address       | string | child address                                                                     |
|    address_name    | string | child address name                                                                |
|  coin_unique_name  | string | system alias                                                                      |
|    coin_symbol     | string | coin symbol                                                                       |
|   coin_full_name   | string | coin full name                                                                    |
|    coin_decimal    |  int   | decimal precision of balance value                                                |
|  deposit_allowed   |  int   | whether deposit is enabled, 0 = no ,1 = yes                                       |
| withdrawal_allowed |  int   | whether withdrawal is enabled, 0= no, 1= yes                                      |
|  current_balance   | string | balance of the child address                                                      |
|      fee_coin      | string | coin type of the transaction fee                                                  |
|   estimated_fee    | string | estimated transaction fee                                                         |
|    upper_limit     | string | email alert trigger upper limit                                                   |
|    lower_limit     | string | email alert trigger lower limit                                                   |
|   limit_per_deal   | string | transaction limit value                                                           |
|  day_limit_amount  | string | remaining daily transaction quota                                                 |
| hour_limit_amount  | string | remaining hourly transaction quota                                                |
|  alarm_frequency   |  int   | notification frequency setting (0: each transaction, 1: every hour, 2: every day) |

#### 7.1.3. Fetch Wallet Address by Coin Type

```json
{
  "URL": "/v1/api/account/deposit-address/{coinType}",

  "Method": "GET",

  "Params": {},

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
      "coin_unique_name": "",
      "deposit_address": ""
    }
  }
}
```

##### Request Parameters

| Parameter |  Type  | Description                               | Required |
| :-------: | :----: | :---------------------------------------- | :------- |
| coin_type | string | coin type ([Reference table](#coin-type)) | yes      |

##### Response Parameters

|    Parameter     |  Type  | Description     |
| :--------------: | :----: | :-------------- |
| coin_unique_name | string | system alias    |
| deposit_address  | string | deposit address |

#### 7.1.4. Verify a Master Deposit Address

> Please note that this API can only verify master addresses. In case you pass a child address, the response message will indiscriminately be “FALSE”.

```json
{
  "URL": "/v1/api/account/verify-deposit-address/{coinType}/{address}",

  "Method": "GET",

  "Params": {},

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": true
  }
}
```

##### Request Parameters

| Parameter |  Type  | Description                               | Required |
| :-------: | :----: | :---------------------------------------- | :------- |
| coin_type | string | coin type ([Reference table](#coin-type)) | yes      |
|  address  | string | Master address                            | yes      |

##### Response Parameters

| Parameter |  Type   | Description                   |
| :-------: | :-----: | :---------------------------- |
|  result   | Boolean | true = success , false = fail |

#### 7.1.5. Fetch Wallet Details for Master and Child addresses

> Please note that while fetching details for a child address, you must also pass its corresponding master address

```json
{
  "URL": "/v1/api/account/list-hdaddress",

  "Method": "POST",

  "Params": {
    "master_address": "0x29ff770a1edaa03736336dc84440e0d42a77ee5c",
    "hd_address": [
      "0x01cf1d31f3ad0fddc0194c0406fb0b75d85b859e",
      "0x01c93e442561decd970c68d51e9fa86d7c7ccd75"
    ],
    "coin_type": "USDT-ERC20",
    "start_balance": "0",
    "end_balance": "100",
    "page_num": 1,
    "page_size": 10
  },

  "Response": {
    "code": 0,
    "msg": "string",
    "result": {
      "list": [
        {
          "address": "string",
          "address_name": "string",
          "coin_decimal": 0,
          "coin_full_name": "string",
          "coin_symbol": "string",
          "coin_unique_name": "string",
          "current_balance": "string",
          "deposit_allowed": 0,
          "estimated_fee": "string",
          "fee_coin": "string",
          "withdrawal_allowed": 0,
          "lower_limit": "string",
          "upper_limit": "string",
          "alarm_frequency": 0
        }
      ],
      "page_num": 0,
      "page_size": 0,
      "pages": 0,
      "total": 0
    }
  }
}
```

##### Request:

|   Parameter    |  Type  | Description                                         | Required |
| :------------: | :----: | :-------------------------------------------------- | :------: |
| master_address | string | master address                                      |   yes    |
|   hd_address   | array  | child addresses, max. 100, optional                 |    no    |
|   coin_type    | string | coin type, optional ([Reference table](#coin-type)) |    no    |
| start_balance  | string | minimum balance of addresses fetched                |    no    |
|  end_balance   | string | maximum balance of addresses fetched                |    no    |
|    page_num    |  int   | page number                                         |    no    |
|   page_size    |  int   | amount of entries shown on one page                 |    no    |

##### Response:

|     Parameter      |  Type  | Description                                                                       |
| :----------------: | :----: | :-------------------------------------------------------------------------------- |
|      address       | string | child address                                                                     |
|    address_name    | string | child address name                                                                |
|    coin_decimal    |  int   | decimal precision of balance value                                                |
|   coin_full_name   | string | coin full name                                                                    |
|    coin_symbol     | string | coin symbol                                                                       |
|  coin_unique_name  | string | system alias                                                                      |
|  current_balance   | string | balance of the child address                                                      |
|  deposit_allowed   |  int   | whether deposit is enabled, 0 = no ,1 = yes                                       |
|   estimated_fee    | string | estimated transaction fee                                                         |
|      fee_coin      | string | transaction fee coin type                                                         |
| withdrawal_allowed |  int   | whether withdrawal is enabled, 0=No, 1=Yes                                        |
|    lower_limit     | string | email alert trigger lower limit                                                   |
|    upper_limit     | string | email alert trigger upper limit                                                   |
|  alarm_frequency   |  int   | notification frequency setting (0: each transaction, 1: every hour, 2: every day) |
|      page_num      |  int   | current page number                                                               |
|     page_size      |  int   | current page size                                                                 |
|       total        |  int   | total no. of records in the list                                                  |
|       pages        |  int   | total no. of pages                                                                |

#### 7.1.6. Fetch Address-wise Balance Details by Coin Type

```json
{
  "URL": "/v1/api/account/balance",

  "Method": "POST",

  "Params": {
    "coin_type": ["string"],
    "include_master_address": true
  },

  "Response": {
    "code": 0,
    "msg": "string",
    "result": {
      "balance": {
        "BTC": "10",
        "ETH": "5"
      },
      "include_master_address": true
    }
  }
}
```

##### Request Parameters

|       Parameter        |  Type   | Description                                    | Required |
| :--------------------: | :-----: | :--------------------------------------------- | :------: |
|       coin_type        | string  | Coin type                                      |    no    |
| include_master_address | boolean | Whether include the master address in response |    no    |

##### Response Parameters

|       Parameter        |  Type   | Description                           |
| :--------------------: | :-----: | :------------------------------------ |
|        balance         | string  | Key: coin unique name, value: balance |
| include_master_address | boolean | request value                         |

#### 7.1.7. Collect Funds from Child Addresses and Transfer to Master Address

> In case no sub-addresses are passed in the sub_address_list parameter, funds will be collected from all addresses with balance above the specified threshold.

```json
{
  "URL": "v1/api/account/collect",

  "Method": "PUT",

  "Params": {
    "coin_type": "string",
    "sub_address_list": ["string"],
    "trigger_threshold": 0
  },

  "Response": {
    "code": 0,
    "msg": "string",
    "result": {}
  }
}
```

##### Request Parameters

|     Parameter     |     Type     | Description                                   | Required |
| :---------------: | :----------: | :-------------------------------------------- | :------: |
|     coin_type     |    string    | Coin type                                     |   yes    |
| sub_address_list  | string array | Sub-addresses to collect balance from         |    no    |
| trigger_threshold |    number    | Minimum balance threshold (minimum value = 0) |   yes    |

#### 7.1.8. Update Auto-collect Configuration

```json
{
  "URL": "v1/api/account/collect/auto",

  "Method": "PUT",

  "Params": {
    "coin_type": "string",
    "switch_collect": true,
    "threshold": 0
  },

  "Response": {
    "code": 0,
    "msg": "string",
    "result": {}
  }
}
```

##### Request Parameters

|   Parameter    |  Type   | Description                                         | Required |
| :------------: | :-----: | :-------------------------------------------------- | :------: |
|   coin_type    | string  | coin type                                           |   yes    |
| switch_collect | boolean | Auto collect toggle                                 |   yes    |
|   threshold    | number  | Minimum balance threshold value (minimum value = 0) |   yes    |

#### 7.1.9. Fetch Current Transaction Fee by Coin Type

> Only Ethereum-based (ETH/ERC-20) tokens are currently supported.

```json
{
  "URL": "/v1/api/account/txfee?coin_type={}&from_address={}&to_address={}&amount={}",

  "Method": "GET",

  "Params": {},

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
        "chain_name": "Ethereum",
        "coin_type": "USDT-ERC20",
        "list_fee_step": [
            {
                "chain_fee": "0.000053",
                "usd_fee": "0.13945728"
            },
            {
                "chain_fee": "0.0000636",
                "usd_fee": "0.16734874"
            },
            {
                "chain_fee": "0.0000795",
                "usd_fee": "0.20918592"
            }
        ]
    }
}
  }
}
```

##### Request Parameters

| Parameter |  Type  | Description                               | Required |
| :-------: | :----: | :---------------------------------------- | :------: |
| coin_type | string | Coin type ([Reference table](#coin-type)) |   yes    |
| from_address | String | sending address                        |   yes    |
|  to_address  | String | receiving address                      |   no     |
|    amount    | String | amount                                 |   no     |

##### Response Paramters

|   Paramter    |  Type  | Description              |
| :-----------: | :----: | :----------------------- |
|  chain_name   | String | chain name               |
|   coin_type   | String | coin type                |
| eth_usd_price | Number | current gas fee          |
| chain_fee_dto | Array  | waas erc20 fee structure |
|      fee      | Number | chain record fee         |
|   gas_limit   | Number | gas limit                |
|   gas_price   | Number | gas price                |
| list_fee_step | Array  | gas fee multiplier       |
|   chain_fee   | Number | withdrawal fee           |
|    usd_fee    | Number | fee in usdt              |

### 7.2. Transaction Details

#### 7.2.1. Fetch List of Transactions

> Default Limit set at: 10

```json
{
  "URL": "/v1/api/list-trans",

  "Method": "POST",

  "Params": {
    "tx_type": "1",
    "tx_id": "123",
    "coin_type": "BTC",
    "address": "tb1q07r35czmvuhl28r93qgv02h6t030gcheqd34rs",
    "start_tx_amount": "0",
    "end_tx_amount": "100",
    "page_num": 1,
    "page_size": 10
  },

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
      "page_num": 1,
      "page_size": 10,
      "total": 1882,
      "pages": 189,
      "list": [
        {
          "wallet_name": "XSGD_test",
          "coin_unique_name": "ETH",
          "coin_symbol": "ETH",
          "coin_full_name": "Ethereum",
          "coin_decimal": 18,
          "address": "0x99dc5fe06a7c6ec548dd283e3b67c28dea289d4e",
          "source_address": "0x975e71b7b89183bb9f86b098d0bb9af3baedff79",
          "tx_type": "2",
          "amount": "0.009000000000000000",
          "tx_id": "20210226030405202339",
          "tx_hash": "0x1439a2634cea40e4673498fc3aad600a9360a37531df919f9ec94413ef692a75",
          "tx_status": "1",
          "create_time": 1614308646000,
          "confirm_time": 1614308646000,
          "confirm_threshold": 6,
          "confirm_threshold_count": 6,
          "fee_coin": "ETH",
          "fee": "0",
          "fee_coin_decimal": 18
        }
      ]
    }
  }
}
```

##### Request Parameters

|    Parameter    |  Type  | Description                                             | Required |
| :-------------: | :----: | :------------------------------------------------------ | :------: |
|     tx_type     | string | Transaction type ([Reference table](#transaction-type)) |    no    |
|    coin_type    | string | Coin type ([Reference table](#coin-type))               |    no    |
|      tx_id      | string | transaction ID                                          |    no    |
|     address     | string | transaction address                                     |    no    |
| start_tx_amount | string | minimum value of transactions fetched                   |    no    |
|  end_tx_amount  | string | maximum value of transactions fetched                   |    no    |
|    page_num     |  int   | page number                                             |    no    |
|    page_size    |  int   | amount of entries shown on one page                     |    no    |

##### Response Parameters

|        Parameter        |  Type  | Description                                                          |
| :---------------------: | :----: | :------------------------------------------------------------------- |
|        page_num         |  int   | current page number                                                  |
|        page_size        |  int   | current page size                                                    |
|          total          |  int   | total no. of records in the list                                     |
|          pages          |  int   | total no. of pages                                                   |
|       wallet_name       | string | wallet name                                                          |
|    coin_unique_name     | string | system alias                                                         |
|       coin_symbol       | string | coin symbol                                                          |
|     coin_full_name      | string | coin full name                                                       |
|      coin_decimal       |  int   | decimal precision of balance value                                   |
|         address         | string | wallet address                                                       |
|     source_address      | string | in case of deposit: sender's address. withdrawal: receiver's address |
|         tx_type         | string | transaction type ([Reference table](#transaction-type))              |
|         amount          | string | transaction amount                                                   |
|          tx_id          | string | transaction ID                                                       |
|         tx_hash         | string | transaction hash                                                     |
|        tx_status        | string | transaction status (0=pending,1=success,2=fail)                      |
|       create_time       |  date  | transaction creation time                                            |
|      confirm_time       |  date  | transaction confirmation (success or failure) time                   |
|    confirm_threshold    |  int   | transaction confirmation threshold (no. of blocks)                   |
| confirm_threshold_count |  int   | current no. of blocks confirmed after transaction                    |
|        fee_coin         | string | coin type of the transaction fee                                     |
|           fee           | string | transaction fee amount                                               |
|    fee_coin_decimal     |  int   | fee coin decimal precision                                           |

#### 7.2.2. Fetch Transaction Details by Transaction ID

```json
{
  "URL": "/v1/api/trans/{tx_id}",

  "Method": "GET",

  "Params": {},

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
      "wallet_name": "",
      "coin_unique_name": "",
      "coin_full_name": "",
      "coin_decimal": "",
      "address": "",
      "source_address": "",
      "tx_type": "1-withdrawal,2-master address deposit,3-hd address deposit,4-collect transaction",
      "amount": 100,
      "tx_id": "",
      "tx_hash": "",
      "tx_status": "",
      "create_time": 1614308646000,
      "confirm_time": 1614308646000,
      "fee_coin": "",
      "fee": ""
    }
  }
}
```
##### Response Parameters

|    Parameter     |  Type  | Description                                                          |
| :--------------: | :----: | :------------------------------------------------------------------- |
|   wallet_name    | string | wallet name                                                          |
| coin_unique_name | string | system alias                                                         |
|  coin_full_name  | string | coin full name                                                       |
|   coin_decimal   |  int   | decimal precision of balance value                                   |
|     address      | string | wallet address                                                       |
|  source_address  | string | in case of deposit: sender's address. withdrawal: receiver's address |
|     tx_type      | string | Transaction type ([Reference table](#transaction-type))              |
|      amount      |  int   | transaction amount                                                   |
|      tx_id       | string | transaction ID                                                       |
|     tx_hash      | string | transaction hash                                                     |
|    tx_status     | string | transaction status (0=pending,1=success,2=fail)                      |
|   create_time    |  date  | transaction creation time                                            |
|   confirm_time   |  date  | transaction confirmation (success or failure) time                   |
|     fee_coin     | string | coin type of the transaction fee                                     |
|       fee        | string | transaction fee amount                                               |

### 7.3. Withdrawal

#### 7.3.1. Send a Withdrawal Request

```json
{
  "URL": "/v1/api/trans/withdrawal",

  "Method": "POST",

  "Params": {
    "request_id": 10,
    "coin_type": "",
    "to_address": "",
    "tx_amount": "",
    "note": "",
    "fee": ""
  },

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
      "tx_id": ""
    }
  }
}
```

##### Request Parameters

| Parameter  |  Type  | Description                               | Required |
| :--------: | :----: | :---------------------------------------- | :------: |
| request_id |  int   | request ID, different for each request    |   yes    |
| coin_type  | string | coin type ([Reference table](#coin-type)) |   yes    |
| to_address | string | deposit address                           |   yes    |
| tx_amount  | string | transaction amount                        |   yes    |
|    note    | string | remarks                                   |    no    |
|    fee     | string | transaction fee amount                    |   no    |

> It's only possible to set up transaction fees for ERC-20 tokens. The default amount is the current average level. Specifying a higher transaction fee amount can achieve faster transaction confirmation. 

##### Response Parameters

| Parameter |  Type  | Description    |
| :-------: | :----: | :------------- |
|   tx_id   | string | transaction ID |

### 7.4. Child address management

#### 7.4.1. Generate Child Addresses For a Master Address

```json
{
  "URL": "/v1/api/hd-address",

  "Method": "POST",

  "Params": {
    "address": "0x29ff770a1edaa03736336dc84440e0d42a77ee5c",
    "count": 2,
    "remarks": ["hd-name-1", "hd-name-2"]
  },

  "Response": {
    "code": 0,
    "msg": "SUCCESS",
    "result": {
      "0x0797bb11a5bbe3692a042cfa57873a38b21ab96a": "hd-name-1",
      "0x1673332f5a8b894e834e1934657c44d2f47443b6": "hd-name-2"
    }
  }
}
```

##### Request Parameters

| Parameter |     Type     | Description                             | Required |
| :-------: | :----------: | :-------------------------------------- | :------: |
|  address  |    string    | master address                          |   yes    |
|   count   |     int      | number of child addresses to be created |   yes    |
|  remarks  | string array | names of the child address              |   yes    |

##### Response Parameters

| Parameter | Type  | Description                     |
| :-------: | :---: | :------------------------------ |
|  result   |  map  | Format - "address:address name" |

#### 7.4.2. Modify the Name of a Child Wallet Address

```json
{
  "URL": "/v1/api/hd-address",

  "Method": "PUT",

  "Params": {
    "address": "0x0797bb11a5bbe3692a042cfa57873a38b21ab96a",
    "remark": "hd-name-6"
  },

  "Response": {
    "code": 0,
    "msg": "SUCCESS"
  }
}
```

##### Request Parameters

| Parameter |  Type  | Description                           | Required |
| :-------: | :----: | :------------------------------------ | :------: |
|  address  | string | master address                        |   yes    |
|  remark   | string | child address name after modification |   yes    |


### 7.5. API Call Back

#### 7.5.1. Transaction Notification API Callback

> {notice-type} is a type of notification

```json
{
  "URL": "host:port/{notice-type}",

  "Method": "POST",

  "Params": {
    "address": "0x29d912b930c2288a2a54ad0446b3b53dce2718d5",
    "amount": "0.099000000000001000",
    "coinType": "ETH",
    "confirmedBlocks": "6",
    "fee": "0.000999999999999",
    "hash": "0xc24b4b8ecec4de14aed9523591de867fff965517d02d66a3f1d110ef5c4dcbd4",
    "status": "1",
    "txId": "20200103025302304697",
    "txType": "Withdraw"
  },

  "Response": {
    "code": 0,
    "msg": "SUCCESS"
  }
}
```

##### Request Parameters

|    Parameter    |  Type  | Description                                              |
| :-------------: | :----: | :------------------------------------------------------- |
|   notice-type   | string | notice type: transaction-notice                          |
|     address     | string | wallet address                                           |
|     amount      | string | transaction amount                                       |
|    coinType     | string | coin type ([Reference table](#coin-type))                |
| confirmedBlocks | string | blocks confirmed                                         |
|       fee       | string | transaction fee                                          |
|      hash       | string | transaction hash                                         |
|     status      | string | transaction status (0=pending, 1=success, 2=fail, 4=approval rejected, 5=transaction cancelled, 6=risk control failure, 7=risk control rejected, 8=withdrawal error)          |
|      txId       | string | transaction ID                                           |
|     txType      | string | transaction type: ([Reference table](#transaction-type)) |

##### Response Parameters

| Parameter |  Type  | Description                                                                                                                              |
| :-------: | :----: | :--------------------------------------------------------------------------------------------------------------------------------------- |
|   code    |  long  | **"0"** if notifications is successfully sent. For other codes or no code, notifications will be sent again as per set maximum frequency |
|    msg    | string | description                                                                                                                              |

## 8. Error Codes

| code  |          Description             |
| :--------: | :------------------------------ |
|   0    | SUCCESS                                                      |
| 106001 | The request parameter format is incorrect.                   |
| 106002 | Unauthorized API request.                                    |
| 106003 | The service is temporarily unavailable.                      |
| 106004 | The timestamp has expired.                                   |
| 106005 | The IP address is incorrect.                                 |
| 106006 | Signature verification error.                                |
| 106008 | Data encryption error.                                       |
| 106009 | Data decryption error.                                       |
| 106011 | Service call exception.                                      |
| 106012 | The passphrase is incorrect.                                 |
| 106013 | The timestamp format is incorrect.                           |
| 106015 | API key null.                                                |
| 106016 | The amount parameter is in the wrong format.                 |
| 106018 | This wallet is currently frozen.                             |
| 106019 | The withdrawal amount is incorrect.                          |
| 106020 | The requested withdrawal amount exceeds the decimal limit.   |
| 106021 | The requested amount exceeds the maximum withdrawal limit defined in the risk control strategy. |
| 106022 | Authorization parameter format is incorrect.                 |
| 106023 | The requested information under this respective wallet has not been found. |
| 106024 | Remarks only supports alphanumeric input with a limited length of 1-32 digits. |
| 106025 | HD address quantity exceeds the maximum limit.               |
| 106026 | The API call frequency has exceeded its limit.               |
| 106027 | The API is being requested too frequent.                     |
| 106028 | Unable to procceed due to duplicate API request.             |
| 106029 | Coin type could not be found.                                |
| 106030 | The requested data has not been found.                       |
| 106031 | You do not have permission for this action.                  |
| 106032 | Database operation error.                                    |
| 106033 | Address status is abnormal.                                  |
| 106034 | Unable to fetch coin price.                                  |
| 106035 | The current balance is below the network fee amount required for this transaction. |
| 106036 | The requested amount exceeds the current available balance.  |
| 106037 | Failed to query fee rate.                                    |
| 106038 | The transaction fee is insufficient.                         |
| 106039 | Error detected with related address data.                    |
| 106040 | Transaction amount + handling fee greater than available balance.|
| 106041 | From_address request parameter is required.                  |
| 106042 | Address format is incorrect.                  |
| 106043 | Duplicate withdrawal request.                  |
| 106044 | The warm wallet status is already normal or frozen.                  |
| 106045 | Not supported this coin type.                  |
| 106046 | Transaction fee is below the required threshold.                  |
| 106047 | Transaction fee exceeds the maximum threshold.                  |
| 106048 | This wallet does not exist.                  |
| 106049 | Not sufficient funds.                  |
| 106050 | The status of the withdrawal transaction is not pending, and it's not allowed to initiate speed up.                  |
| 106051 | Your original transaction has been succesfully processed! Acceleration has terminated.                  |
| 106052 | Congratulations! Your transaction is being accelerated!                  |
| 106053 | Attempting cancellation.                  |
| 106054 | Accelerated transaction already exists.                  |
| 106055 | Cancel accelerated transaction already exists.                  |
| 106056 | Wait withdraw call back.                  |
| 106057 | Asset does not exist.                  |
| 106058 | Unable to proceed with this action due to unresolved transactions in this wallet.                  |
| 106059 | The transaction fee amount is not in the correct format.                  |
| 106060 | Withdrawal Error.                  |
| 106061 | Withdrawal Verification Error.                  |
| 106062 | The origin address is not whitelisted to transfer token.                  |
| 106063 | The transaction can not be canceled.                  |
| 106064 | Transaction Amount is higher than per Transaction Limit.                  |
| 106065 | The Hourly Transaction Limit has been exceeded.                  |
| 106066 | The Daily Transaction Limit has been exceeded.                  |
| 106067 | Warm wallet approver workflow has not been setup.                  |
| 106068 | Destination address is not a cold wallet address.                  |
| 106069 | Warm wallet status is frozen.                  |
| 106070 | Error occurred during the creation of warm wallet.                  |
| 106071 | This warm wallet does not exist.                  |
